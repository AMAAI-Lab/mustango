
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="generator" content="Hugo 0.66.0" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,600" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/github.min.css">
  <link rel="stylesheet" href="../css/normalize.css">
  <link rel="stylesheet" href="../css/skeleton.css">
  <link rel="stylesheet" href="../css/custom.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
    integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <link rel="alternate" href="index.xml" type="application/rss+xml" title="Speech Research">
  <link rel="shortcut icon" href="favicon.png" type="image/x-icon" />
  <title>Text-to-Audio Generation using Instruction Tuned LLM and Latent Diffusion Model</title>
</head>

<body rightmargin="150" leftmargin="150" topmargin="100" bottommargin="100" line-height:160%>
  <font size="5">

    <div class="container">

      <header role="banner">

      </header>
      <main role="main">
        <article itemscope itemtype="https://schema.org/BlogPosting">
          <br></br>
          <h1 itemprop="headline" align="center">
            <font color="000093" size="7">Mustango: Toward Controllable Text-to-Music Generation</br>
            </font>
          </h1>
          <br></br>
          <p style="line-height:1" align="center"><b>
              <font color="061E61">Jan Melechovsky<sup>1</sup>, Zixun Guo<sup>2</sup>, Deepanway Ghosal<sup>1</sup>, Navonil Majumder<sup>1</sup>, Dorien Herremans<sup>1</sup>, Soujanya Poria<sup>1</sup></font>
            </b></p>
          <p style="line-height:0.6" align="center">
            <font color="061E61"><sup>1</sup>Singapore University of Technology and Design, Singapore</font>
          </p>
          <p style="line-height:0.6" align="center">
            <font color="061E61"><sup>2</sup>Queen Mary University of London, UK</font>
          </p>

          <section itemprop="entry-text">
            <br>
            <div class="container">
              <center>
                <p><a href="https://arxiv.org/abs/">[Paper on ArXiv]</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://github.com/AMAAI-Lab/mustango">[Code on GitHub]</a></p>
              </center>
            </div>
            <h2 id="abstract">
              <font color="000093">Abstract</font>
            </h2>
            <p style="text-align: justify;">
              <font color="061E61"> With recent advancements in text-to-audio and text-to-music based on latent diffusion models, the quality of generated content has been reaching new heights. The controllability of musical aspects, however, has not been explicitly explored in text-to-music systems yet. In this paper, we present Mustango, a music-domain-knowledge-inspired text-to-music system based on diffusion, that expands the Tango text-to-audio model. Mustango aims to control the generated music, not only with general text captions, but from more rich captions that could include specific instructions related to chords, beats, tempo, and key. As part of Mustango, we propose MuNet, a Music-Domain-Knowledge-Informed UNet sub-module to integrate these music-specific features, which we predict from the text prompt, as well as the general text embedding, into the diffusion denoising process. To overcome the limited availability of open datasets of music with text captions, we propose a novel data augmentation method that includes altering the harmonic, rhythmic, and dynamic aspects of music audio and using state-of-the-art Music Information Retrieval methods to extract the music features which will then be appended to the existing descriptions in text format. We release the resulting MusicBench dataset which contains over 52K instances and includes music-theory-based descriptions in the caption text. Through extensive experiments, we show that the quality of the music generated by Mustango is state-of-the-art, and the controllability through music-specific text prompts greatly outperforms other models in terms of desired chords, beat, key, and tempo, on multiple datasets. </font>
            </p>

            <h2 id="note">
              <font color="000093">Note</font>
            </h2>
            <li>
              <font color="061E61"> Mustango generates music off text prompts.</font>
            </li>
            <li>
              <font color="061E61"> Mustango utilizes music domain knowledge to achieve immense musical controllability and better musicality.</font>
            </li>

            <br></br>
            <figure>
              <p align="center"><img src="mustango.pdf" width="100%" class="center" /></p>
              <figcaption>
                <p style="text-align: justify;">
                  <font color="061E61"><b>Figure 1:</b> Mustango architecture.
                </p>
              </figcaption>
            </figure>
<!--             <table class="table" align="center" style="table-layout: fixed;word-break:break-word">
              <thead>
                <tr>
                  <th scope="col" width="50%">
                    <font color="061E61">One-minute overview for a quick-taste</font>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <th>
                    <center>
                      <video width="800" controls>
                        <source src="Overview.mp4" type="video/mp4">
                        Your browser does not support HTML video.
                      </video>
                      <p>The following sections show more demos.</p>
                    </center>
                    
                  </th>
                  
                </tr>
              </tbody>
            </table> -->
            

            <!--
<br></br>
<h2 id="audio-samples"><font color="000093">Audio Samples</font></h2>
<p><font color="061E61"> Our method is shown in Figure 1. The below audio samples show the comparison between Recordings, ground-truth (GT) mel + Vocoder, FastSpeech 2, DiffGAN-TTS, DiffSpeech, ProDiff, GradTTS, ResGrad-4 (Our method), and ResGrad-50 (Our method). Three samples are randomly selected from the test dataset of LJSpeech, LibriTTS, and VCTK. Details are illustrated as follows: </font></p>
<ul style="list-style-type:square">
-->
            <!--
<li><font color="061E61"> For each dataset, the same HiFi-GAN vocoder pretrained on GT mel is used for all methods. </font></li>
-->
            <!--<li>
<font color="061E61"> Each generated sample has been normalized, and the raw recording is shown in Recordings. </font></li>
-->
            <!--<li>
<li><font color="061E61"> Our method ResGrad uses FastSpeech 2 as the initial predictor for estimating mel-spectrogram. </font></li>
-->


            <br></br>
<!--             <h2 id="TTA Generation with Human Text Prompt">
              <font color="000093">TTA Generation with Human Text Prompt</font>
            </h2>

            <p><b>
                <font color="061E61">Short Samples:</font>
              </b></p>

            <table class="table" align="center" style="table-layout: fixed;word-break:break-word">
              <thead>
                <tr>
                  <td scope="col" width="33%">
                    <font color="061E61">A man is speaking under the water.</font>
                  </td>
                  <td scope="col" width="33%">
                    <font color="061E61">Two space shuttles are fighting in the space.</font>
                  </td>
                  <td scope="col" width="33%">
                    <font color="061E61">The sound of a steam engine.</font>
                  </td>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td scope="row"><audio controls="controls">
                      <source src="samples/1_text2audio/2_humantextprompt/A man is speaking under the water.wav"
                        autoplay />Your browser does not support the audio element.
                    </audio></td>
                  <td><audio controls="controls">
                      <source
                        src="samples/1_text2audio/2_humantextprompt/Two space shuttles are fighting in the space.wav"
                        autoplay />Your browser does not support the audio element.
                    </audio></td>
                  <td><audio controls="controls">
                      <source src="samples/1_text2audio/2_humantextprompt/The sound of a steam engine.wav" autoplay />
                      Your browser does not support the audio element.
                    </audio></td>

                </tr>
              </tbody>
            </table>
 -->

<!--             <p><b>
                <font color="061E61">Long Samples:</font>
              </b></p>

            <table class="table" align="center" style="table-layout: fixed;word-break:break-word">
              <thead>
                <tr>
                  <td scope="col" width="33%">
                    <font color="061E61">Cat gently meowing and purring in long intervels.</font>
                  </td>
                  <td scope="col" width="33%">
                    <font color="061E61">Peaceful and calming ambient music with singing bowl and other instruments.
                    </font>
                  </td>
                  <td scope="col" width="33%">
                    <font color="061E61">Nature environmental noise with various bird vocalization, high fidelity,
                      children playing far away and light wind.</font>
                  </td>

                </tr>
              </thead>
              <tbody>
                <tr>
                  <td scope="row"><audio controls="controls">
                      <source
                        src="samples/1_text2audio/2_humantextprompt/5_long_audio/Cat gently meowing and purring in long intervels.wav"
                        autoplay />Your browser does not support the audio element.
                    </audio></td>
                  <td><audio controls="controls">
                      <source
                        src="samples/1_text2audio/2_humantextprompt/5_long_audio/Peaceful and calming ambient music with singing bowl and other instruments.wav"
                        autoplay />Your browser does not support the audio element.
                    </audio></td>
                  <td><audio controls="controls">
                      <source
                        src="samples/1_text2audio/2_humantextprompt/Nature environmental noise with various bird vocalization, high fidelity, children playing far away and light wind.wav"
                        autoplay />Your browser does not support the audio element.
                    </audio></td>

                </tr>
              </tbody>
            </table> -->

            <!-- <p><b>
                <font color="061E61">Examples from the expert listening study:</font>
              </b></p>

            <table class="table" align="center" style="table-layout: fixed;word-break:break-word">
                <tr>
                  <td scope="col" width="100%">
                  </td>
                  </td>
                </tr>
                
                <tr>
                  <td scope="row"><audio controls="controls">
                      <source src="../samples/tango-pretrained/output_0.wav" autoplay />
                      Your browser does not support the audio element.
                    </audio></td>
                  <td><audio controls="controls">
                      <source src="../samples/tango-pretrained-musicbench/output_0.wav""
                        autoplay />Your browser does not support the audio element.
                    </audio></td>
                    <td><audio controls="controls">
                        <source src="../samples/mustango-pretrained/output_0.wav""
                          autoplay />Your browser does not support the audio element.
                      </audio></td>
                  <td><audio controls="controls">
                      <source
                        src="../samples/mustango-scratch/output_0.wav""
                        autoplay />Your browser does not support the audio element.
                    </audio></td>
                </tr>
	         <tr>
                  <td scope="col" width="33%">
                  A <em style="color:red;">bird</em> <font color="061E61"> is whistling.
                  </td>
                  <td scope="col" width="33%">
                    A <em style="color:red;">dog</em> <font color="061E61"> is whistling.
                  </td>
                  <td scope="col" width="33%">
                    A <em style="color:red;">person</em> <font color="061E61"> is whistling.
                  </td>
                </tr>
                <tr>
                  <td scope="row"><audio controls="controls">
                      <source src="samples/temporal/Tango2-RT/A_bird_whistling_200_3.wav" autoplay />
                      Your browser does not support the audio element.
                    </audio></td>
                  <td><audio controls="controls">
                      <source src="samples/temporal/Tango2-RT/A_dog_whistling_200_3.wav"
                        autoplay />Your browser does not support the audio element.
                    </audio></td>
                  <td><audio controls="controls">
                      <source
                        src="samples/temporal/Tango2-RT/A_person_whistling_200_3.wav"
                        autoplay />Your browser does not support the audio element.
                    </audio></td>
                </tr>    
              </tbody>
            </table> -->


            <p><b>
                <font color="061E61">Examples from the expert listening study:</font>
              </b></p>

<table class="table" align="center" style="table-layout: fixed;word-break:break-word">
  <thead>
    <tr>
      <th><a href="https://huggingface.co/spaces/declare-lab/tango">Tango pretrained</a></th>
      <th><a href="https://huggingface.co/spaces/declare-lab/tango">Tango finetuned on MusicBench</a></th>
      <th><a href="https://github.com/AMAAI-Lab/mustango">Mustango finetuned on MusicBench</a></th>
      <th><a href="https://github.com/AMAAI-Lab/mustango">Mustango trained on MusicBench</a></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>An instrumental blues melody played by a lead guitar and a strumming acoustic guitar. The acoustic guitarist's strumming keeps the rhythm steady. The chord sequence is G7, F7, C7, G7. This song goes at 100 beats per minute.
    </td>
</tr>
<tr>
      <td>
        <audio controls="controls">
          <source src="samples/tango-pretrained/output_0.wav" type="audio/wav">
          Your browser does not support the audio element.
        </audio>
      </td>
      <td>
        <audio controls="controls">
          <source src="samples/tango-pretrained-musicbench/output_0.wav" type="audio/wav">
          Your browser does not support the audio element.
        </audio>
      </td>
      <td>
        <audio controls="controls">
          <source src="samples/mustango-pretrained/output_0.wav" type="audio/wav">
          Your browser does not support the audio element.
        </audio>
      </td>
      <td>
        <audio controls="controls">
          <source src="samples/mustango-scratch/output_0.wav" type="audio/wav">
          Your browser does not support the audio element.
        </audio>
      </td>
    </tr>

    <tr>
        <td>A piano plays a popular melody over the chords of Am, Fmaj7, Cmaj7, G. There is only piano playing, no other instruments or voice. The tempo is Adagio.
      </td>
  </tr>

    <tr>
        <td>
          <audio controls="controls">
            <source src="samples/tango-pretrained/output_2.wav" type="audio/wav">
            Your browser does not support the audio element.
          </audio>
        </td>
        <td>
          <audio controls="controls">
            <source src="samples/tango-pretrained-musicbench/output_2.wav" type="audio/wav">
            Your browser does not support the audio element.
          </audio>
        </td>
        <td>
          <audio controls="controls">
            <source src="samples/mustango-pretrained/output_2.wav" type="audio/wav">
            Your browser does not support the audio element.
          </audio>
        </td>
        <td>
          <audio controls="controls">
            <source src="samples/mustango-scratch/output_2.wav" type="audio/wav">
            Your browser does not support the audio element.
          </audio>
        </td>
      </tr>

      <tr>
        <td>This is a techno piece with drums and beats and a leading melody. A synth plays chords. The music kicks off with a powerful and relentless drumbeat. Over the pounding beats, a leading melody emerges. It has strong danceability and can be played in a club. The tempo is 160 bpm. The chords played by the synth are C, F, G.
      </td>
  </tr>

    <tr>
        <td>
          <audio controls="controls">
            <source src="samples/tango-pretrained/output_9.wav" type="audio/wav">
            Your browser does not support the audio element.
          </audio>
        </td>
        <td>
          <audio controls="controls">
            <source src="samples/tango-pretrained-musicbench/output_9.wav" type="audio/wav">
            Your browser does not support the audio element.
          </audio>
        </td>
        <td>
          <audio controls="controls">
            <source src="samples/mustango-pretrained/output_9.wav" type="audio/wav">
            Your browser does not support the audio element.
          </audio>
        </td>
        <td>
          <audio controls="controls">
            <source src="samples/mustango-scratch/output_9.wav" type="audio/wav">
            Your browser does not support the audio element.
          </audio>
        </td>
      </tr>

      <tr>
        <td>A horn and a bass guitar groove to a reggae tune. The combination of the horn section's catchy melodies and the buoyant bassline creates an irresistible groove. The bassline is bouncy and lively. The song is played at the pace of Adagio. An electric keyboard plays the chords Am, Dm, G, C.
      </td>
  </tr>

    <tr>
        <td>
          <audio controls="controls">
            <source src="samples/tango-pretrained/output_10.wav" type="audio/wav">
            Your browser does not support the audio element.
          </audio>
        </td>
        <td>
          <audio controls="controls">
            <source src="samples/tango-pretrained-musicbench/output_10.wav" type="audio/wav">
            Your browser does not support the audio element.
          </audio>
        </td>
        <td>
          <audio controls="controls">
            <source src="samples/mustango-pretrained/output_10.wav" type="audio/wav">
            Your browser does not support the audio element.
          </audio>
        </td>
        <td>
          <audio controls="controls">
            <source src="samples/mustango-scratch/output_10.wav" type="audio/wav">
            Your browser does not support the audio element.
          </audio>
        </td>
      </tr>

      <tr>
        <td>This is a metal song with a guitar, drums and bass guitar. The bassist, wielding a solid-bodied bass guitar, adds depth and power to the sonic landscape. The drummer commands a massive drum kit. With a relentless force, they pound out thunderous rhythms, driving the music forward. As the song begins, the guitar roars to life, delivering a series of distorted chords. It follows the chords of Em, C, G, D. The tempo is 120 bpm.
      </td>
  </tr>

    <tr>
        <td>
          <audio controls="controls">
            <source src="samples/tango-pretrained/output_12.wav" type="audio/wav">
            Your browser does not support the audio element.
          </audio>
        </td>
        <td>
          <audio controls="controls">
            <source src="samples/tango-pretrained-musicbench/output_12.wav" type="audio/wav">
            Your browser does not support the audio element.
          </audio>
        </td>
        <td>
          <audio controls="controls">
            <source src="samples/mustango-pretrained/output_12.wav" type="audio/wav">
            Your browser does not support the audio element.
          </audio>
        </td>
        <td>
          <audio controls="controls">
            <source src="samples/mustango-scratch/output_12.wav" type="audio/wav">
            Your browser does not support the audio element.
          </audio>
        </td>
      </tr>

<!-- 
    <tr>
      <td style="color:red;">Dogs are barking and gunshot in the background</td>
      <td>
        <audio controls="controls">
          <source src="samples/temporal/AudioLDM-Lemon/dogs are barking and gunshot in the background.wav" type="audio/wav">
          Your browser does not support the audio element.
        </audio>
      </td>
      <td>
        <audio controls="controls">
          <source src="samples/temporal/Tango2-RT/dogs are barking and gunshot in the background.wav" type="audio/wav">
          Your browser does not support the audio element.
        </audio>
      </td>
    </tr>
    <tr>
      <td style="color:red;">Wooden table tapping sound while water pouring</td>
      <td>
        <audio controls="controls">
          <source src="samples/temporal/AudioLDM-Lemon/Wooden table tapping sound while water pouring.wav" type="audio/wav">
          Your browser does not support the audio element.
        </audio>
      </td>
      <td>
        <audio controls="controls">
          <source src="samples/temporal/Tango2-RT/Wooden table tapping sound while water pouring.wav" type="audio/wav">
          Your browser does not support the audio element.
        </audio>
      </td>
    </tr>
    <tr>
      <td style="color:red;">Two gunshots followed by birds flying away while chirping</td>
      <td>
        <audio controls="controls">
          <source src="samples/temporal/AudioLDM-Lemon/two gunshots followed by birds flying away while chirping.wav" type="audio/wav">
          Your browser does not support the audio element.
        </audio>
      </td>
      <td>
        <audio controls="controls">
          <source src="samples/temporal/Tango2-RT/two gunshots followed by birds flying away while chirping.wav" type="audio/wav">
          Your browser does not support the audio element.
        </audio>
      </td>
    </tr> -->


  </tbody>
</table>

            <hr>
            <h2 id="Limitations">
              <font color="000093">Limitations</font>
            </h2>
            <div class="container">
              <p>
                TANGO is trained on the small AudioCaps dataset so it may not generate good audio samples related to concepts that it has not seen in training (e.g. singing). For the same reason, TANGO is not always able to finely control its generations over textual control prompts. For example, the generations from TANGO for prompts 'Chopping tomatoes on a wooden table' and 'Chopping potatoes on a metal table' are very similar. 'Chopping vegetables on a table' also produces similar audio samples. Training text-to-audio generation models on larger datasets is thus required for the model to learn the composition of textual concepts and varied text-audio mappings. We are training another verison of TANGO on larger datasets to enhance its generalization, compositional and controllable generation ability.
              </p>
            </div>            
            <h2 id="Other comments">
              <font color="000093">Other comments</font>
            </h2>
            <div class="container">
              <p>
                1. We share <a href="https://github.com/AMAAI-Lab/mustango">our code on github</a>, which aims to open source the music generation model training and evaluation for easier comparison.
              </p>
            </div>
            <h2 id="Acknowledgement">
              <font color="000093">Acknowledgement</font>
            </h2>
            <div class="container">
              <p>
                This website is created based on <a href = "https://github.com/AudioLDM/AudioLDM.github.io"> https://github.com/AudioLDM/AudioLDM.github.io </a>
              </p>
            </div> 
          </section>
        </article>
      </main>

    </div>

    <script>
      (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
          (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date(); a = s.createElement(o),
          m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
      })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
      ga('create', 'UA-139981676-1', 'auto');
      ga('send', 'pageview');
    </script>

    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>



    <script type="text/x-mathjax-config">
     MathJax.Hub.Config({
         HTML: ["input/TeX","output/HTML-CSS"],
         TeX: {
                Macros: {
                         bm: ["\\boldsymbol{#1}", 1],
                         argmax: ["\\mathop{\\rm arg\\,max}\\limits"],
                         argmin: ["\\mathop{\\rm arg\\,min}\\limits"]},
                extensions: ["AMSmath.js","AMSsymbols.js"],
                equationNumbers: { autoNumber: "AMS" } },
         extensions: ["tex2jax.js"],
         jax: ["input/TeX","output/HTML-CSS"],
         tex2jax: { inlineMath: [ ['$','$'], ["\\(","\\)"] ],
                    displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
                    processEscapes: true },
         "HTML-CSS": { availableFonts: ["TeX"],
                       linebreaks: { automatic: true } }
     });
 </script>

    <script type="text/x-mathjax-config">
     MathJax.Hub.Config({
       tex2jax: {
         skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
       }
     });
 </script>

    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML">
      </script>


</body>

</html>
